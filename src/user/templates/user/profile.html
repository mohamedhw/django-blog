{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block content %}
    <div class="my-border" style="border-radius: 9px">
        <img class="mt-5 ms-5" src='{{ user.profile.image.url }}'>
        <h3 class="mt-3 ms-5">{{ user.username }}</h3>
        <hr class="mt-5">
        <form method='post' enctype="multipart/form-data" id="profile-form"> {% csrf_token %}
            <h2 class="mb-5 ms-5 title">Ubdate your account</h2>
            <fieldset class="col-lg-6 ms-5 mb-5">
                {{ u_form|crispy }}
                {{ p_form|crispy }}
                <div class="form-group">
                <button type="submit" class="btn btn-outline-info">Update</button>
                </div>
            </fieldset>
        </form>
    </div>
    <!-- <script>
        const form  = document.getElementById('profile-form'),
        const username  = document.getElementById('id_username')
        const email  = document.getElementById('id_email')
        const p_image  = document.getElementById('id_image')
        const csrf  = document.getElementsByName('csrfmiddlewaretoken')
        console.log(csrf)

        form.addEventListener('submit', e => {
            e.preventDefault()

            const fpd = new FormData()
            fpd.append('csrfmiddlewaretoken', csrf[0].value)
            fpd.append('username', username.value)
            fpd.append('email', email.value)
            fpd.append('p_image', p_image.value)


            $.ajax({
                type: 'POST',
                url: "",
                data: fpd,
                success: function(response){

                },
                error: function(error){
                    console.log(error)
                },
            })
        })


    </script> -->
{% endblock %}
